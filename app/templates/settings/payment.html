<ion-view title="Update Payment Method" class="settings-page">
    <ion-content>
        <p class="padding" align="center" ng-if="vm.user.has_payment">Your current card is: {{vm.user.payment_info.card_type}} ending in {{vm.user.payment_info.last_four}}, expiring on {{vm.user.payment_info.exp_date}}</p>

        <form class="list" stripe-form="stripeCallback" name="paymentForm">
            <label class="item item-input">
                <input type="text" ng-model="vm.number" placeholder="Card Number"
                       payments-format="card" payments-validate="card" name="card" ng-minlength="1"/>
        <span class="invalid-entry"
              ng-show="paymentForm.card.$dirty && paymentForm.card.$invalid">Invalid card number</span>
            </label>

            <label class="item item-input">
                <input type="text" ng-model="vm.expiry" placeholder="Expiration" payments-format="expiry"
                       payments-validate="expiry"
                       name="expiry" ng-minlength="1"/>
                <span class="invalid-entry" ng-show="paymentForm.expiry.$dirty && paymentForm.expiry.$invalid">Invalid expiration</span>
            </label>

            <label class="item item-input">
                <input type="text" ng-model="vm.cvc" placeholder="CVC" payments-format="cvc" payments-validate="cvc"
                       name="cvc" ng-minlength="1"/>
                <span class="invalid-entry"
                      ng-show="paymentForm.cvc.$dirty && paymentForm.cvc.$invalid">Invalid CVC</span>
            </label>

            <div class="item button-bar">
                <button type="submit" class="button button-positive" ng-disabled="paymentForm.$invalid"
                        ng-click="number=vm.number; expiry=vm.expiry; cvc=vm.cvc; showLoading()">
                    Save
                    <i class="icon ion-ios-checkmark-empty"></i></button>
            </div>
        </form>
    </ion-content>
</ion-view>
