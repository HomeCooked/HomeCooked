<ion-view ng-controller="ChefCtrl as ctrl" title="Dishes I'm cooking">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content class="has-header">
    <div class="list card">
      <div class="item item-avatar" ng-repeat="batch in ctrl.batches">
        <img ng-src="{{batch.dishImage || 'images/logo.png'}}">

        <h2>{{batch.dishName}}</h2>

        <p>${{batch.price}} per portion</p>

        <p ng-if="batch.quantityOrdered > 0" class="item">
          <span class="title">{{batch.quantityOrdered}} portions ordered</span>
          <div class="hc-orders">
            <div ng-repeat="order in batch.orders" class="hc-order">
              <img ng-src="{{order.userImage || 'images/user.png'}}" width="100%">

              <div class="hc-order-username">{{order.userName}}</div>
              <div class="hc-order-quantity">{{order.quantity}}</div>
            </div>
          </div>
        </p>
        <p ng-if="batch.quantity > batch.quantityOrdered" class="item">
          <span class="title">{{batch.quantity - batch.quantityOrdered}} portions available</span>
          <a href class="item-note" ng-click="ctrl.removePortions(batch)">
            <i class="icon ion-minus-circled"></i> Remove remaining portions
          </a>
        </p>
      </div>
    </div>
    <button class="button button-block button-positive" ng-click="ctrl.openAddDish()"
            ng-disabled="ctrl.batches.length>=ctrl.maxBatches">Add Dish
    </button>
    <div align="center" ng-show="ctrl.batches.length>=ctrl.maxBatches">You can have maximum {{ctrl.maxBatches}} dish
      types active.
      After you sell and deliver all the dishes, you will be able to add new ones.
    </div>
  </ion-content>
</ion-view>
