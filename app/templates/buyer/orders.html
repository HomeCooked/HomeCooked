<ion-view title="My Orders" hide-back-button="true" class="orders">
    <ion-content class="has-header">
        <ion-refresher pulling-text="Pull to refresh" on-refresh="reload()">
        </ion-refresher>
        <p class="padding" align="center" ng-if="!vm.activeOrders.length">
            You haven't placed any order yet.<br>
            <a ui-sref="app.buyer">Place one</a>
        </p>

        <div class="list card" ng-repeat="order in vm.activeOrders">

            <div class="item item-thumbnail-left">
                <img ng-src="{{order.chef.picture || 'images/user.png'}}">

                <h2>Chef {{::order.chef.first_name}} {{::order.chef.last_name}}</h2>

                <p>{{::order.chef.phone_number}}</p>

                <p class="wrap">{{order.chef.address}}</p>

                <p class="wrap">Pickup {{order.start_time | amDateFormat:'ddd, MMM D (ha'}} to
                    {{order.end_time |Â amDateFormat:'ha'}})</p>
            </div>

            <!-- a ui-sref="app.dish-preview({id: order.chef.id, dishId: dish.id})"-->
            <div class="item item-avatar" ng-repeat="dish in order.dishes">
                <img ng-src="{{dish.picture || 'images/logo.png'}}">
                <span class="item-right">{{dish.cost}} $</span>

                <h3 class="wrap">{{dish.title}}</h3>

                <p>{{dish.portions.length}} portion(s)</p>
            </div>

            <div class="item">
                Total paid:
                <span class="item-right">{{order.total_price}} $</span>
            </div>
            <div class="item tabs button-bar">
                <a href='tel:{{::order.chef.phone_number}}' class="button button-dark button-clear">
                    <i class="icon ion-ios-telephone"></i>
                    Call
                </a>
                <a class="button button-dark button-clear" ng-click="vm.notifyChef(order)">
                    <i class="icon ion-chatbox"></i>
                    SMS
                </a>
                <button class="button button-dark button-clear" ng-click="vm.openMap(order.chef)">
                    <i class="icon ion-ios-navigate"></i>
                    Maps
                </button>
            </div>
        </div>
    </ion-content>
</ion-view>
